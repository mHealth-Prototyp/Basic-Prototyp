"use strict";(globalThis["webpackChunkmhealth_proto"]=globalThis["webpackChunkmhealth_proto"]||[]).push([[242],{2242:(t,i,l)=>{l.r(i),l.d(i,{default:()=>B});var e=l(9835),a=l(6970),n=l(1957);const o=t=>((0,e.dD)("data-v-51471c08"),t=t(),(0,e.Cn)(),t),s={class:"row"},d={class:"col"},r={class:"col"},g={class:"row"},u={class:"col"},c={class:"col"},p={class:"row"},m={class:"col select-col"},v={class:"row"},h={class:"col select-col"},b={class:"button-container"},y={class:"oid-list"},_=(0,e.Uk)(),f=o((()=>(0,e._)("br",null,null,-1))),z=(0,e.Uk)(),$=o((()=>(0,e._)("br",null,null,-1))),w=(0,e.Uk)(),C=o((()=>(0,e._)("br",null,null,-1))),O=(0,e.Uk)(),S=o((()=>(0,e._)("br",null,null,-1)));function V(t,i,l,o,V,U){const k=(0,e.up)("q-card-section"),G=(0,e.up)("q-select"),F=(0,e.up)("q-separator"),N=(0,e.up)("q-input"),T=(0,e.up)("q-btn"),W=(0,e.up)("q-card");return(0,e.wg)(),(0,e.j4)(W,{class:"settings-card"},{default:(0,e.w5)((()=>[(0,e.Wm)(k,{class:"card-title"},{default:(0,e.w5)((()=>[(0,e.Uk)((0,a.zw)(t.$t("layout.menu.settings")),1)])),_:1}),(0,e.Wm)(k,null,{default:(0,e.w5)((()=>[(0,e._)("form",null,[(0,e._)("h3",null,(0,a.zw)(t.$t("common.language")),1),(0,e._)("p",null,(0,a.zw)(t.$t("settings.languageText")),1),(0,e.Wm)(G,{class:"lang-select",modelValue:t.language,"onUpdate:modelValue":i[0]||(i[0]=i=>t.language=i),options:t.availableLanguages,"option-label":i=>null==i?"-":t.$t("settings."+i),disable:t.availableLanguages.length<2,label:t.$t("common.language")},null,8,["modelValue","options","option-label","disable","label"]),(0,e.Wm)(F,{size:"0pt"}),(0,e._)("h3",null,(0,a.zw)(t.$t("settings.organizationTitle")),1),(0,e._)("p",null,(0,a.zw)(t.$t("settings.organizationText")),1),(0,e._)("div",s,[(0,e._)("div",d,[(0,e.Wm)(N,{modelValue:t.orgName,"onUpdate:modelValue":i[1]||(i[1]=i=>t.orgName=i),error:t.invalidName,type:"text",label:t.$t("settings.organizationName")},null,8,["modelValue","error","label"])]),(0,e._)("div",r,[(0,e.Wm)(N,{modelValue:t.orgOid,"onUpdate:modelValue":i[2]||(i[2]=i=>t.orgOid=i),error:t.invalidOid,type:"text",label:t.$t("settings.organizationOid")},null,8,["modelValue","error","label"])])]),(0,e._)("div",g,[(0,e._)("div",u,[(0,e.Wm)(N,{modelValue:t.orgContactGiven,"onUpdate:modelValue":i[3]||(i[3]=i=>t.orgContactGiven=i),error:t.invalidGiven,type:"text",label:t.$t("settings.organizationGiven")},null,8,["modelValue","error","label"])]),(0,e._)("div",c,[(0,e.Wm)(N,{modelValue:t.orgContactFamily,"onUpdate:modelValue":i[4]||(i[4]=i=>t.orgContactFamily=i),error:t.invalidFamily,type:"text",label:t.$t("settings.organizationFamily")},null,8,["modelValue","error","label"])])]),(0,e._)("p",null,(0,a.zw)(t.$t("settings.organizationTypeText")),1),(0,e._)("div",p,[(0,e._)("div",m,[(0,e.Wm)(G,{modelValue:t.facility,"onUpdate:modelValue":i[5]||(i[5]=i=>t.facility=i),options:t.facilityOptions,dense:"","option-label":t=>null==t?"?":t.languageDisplays.de,"option-value":t=>null==t?null:t.defaultCoding.code,label:t.$t("settings.organizationFacilityType")},null,8,["modelValue","options","option-label","option-value","label"])])]),(0,e._)("div",v,[(0,e._)("div",h,[(0,e.Wm)(G,{modelValue:t.practiceSetting,"onUpdate:modelValue":i[6]||(i[6]=i=>t.practiceSetting=i),options:t.practiceSettingOptions,dense:"","option-label":t=>null==t?"?":t.languageDisplays.de,"option-value":t=>null==t?null:t.defaultCoding.code,label:t.$t("settings.organizationPracticeSetting")},null,8,["modelValue","options","option-label","option-value","label"])])]),(0,e._)("div",b,[(0,e.Wm)(T,{id:"reset-button",onClick:i[7]||(i[7]=(0,n.iM)((i=>t.reset(i,!0)),["stop"])),type:"submit",label:t.$t("common.loadDefault")},null,8,["label"]),(0,e.Wm)(T,{id:"save-button",onClick:(0,n.iM)(t.save,["stop"]),type:"submit",disable:t.invalidOid||t.invalidName||t.invalidGiven||t.invalidFamily,label:t.$t("common.save")},null,8,["onClick","disable","label"])]),(0,e.Wm)(F,{size:"0pt"}),(0,e._)("h3",null,(0,a.zw)(t.$t("settings.oidsTitle")),1),(0,e._)("p",null,(0,a.zw)(t.$t("settings.oidsText")),1),(0,e._)("ul",y,[(0,e._)("li",null,[(0,e._)("b",null,(0,a.zw)(t.$t("settings.oidsMpi"))+":",1),_,f,(0,e.Uk)(" "+(0,a.zw)(t.oids.mpiId),1)]),(0,e._)("li",null,[(0,e._)("b",null,(0,a.zw)(t.$t("settings.oidsSpid"))+":",1),z,$,(0,e.Uk)(" "+(0,a.zw)(t.oids.eprSpid),1)]),(0,e._)("li",null,[(0,e._)("b",null,(0,a.zw)(t.$t("settings.oidsAhv"))+":",1),w,C,(0,e.Uk)(" "+(0,a.zw)(t.oids.ahv),1)]),(0,e._)("li",null,[(0,e._)("b",null,(0,a.zw)(t.$t("settings.oidsApp"))+":",1),O,S,(0,e.Uk)(" "+(0,a.zw)(t.oids.app),1)])])])])),_:1})])),_:1})}var U=l(1834),k=l.n(U),G=l(8201),F=l(2874);const N=(0,e.aZ)({name:"SettingsPage",data(){return{language:F.APP_LANGUAGES.DE,availableLanguages:new Array,orgName:"",invalidName:!1,orgOid:"",invalidOid:!1,orgContactGiven:"",invalidGiven:!1,orgContactFamily:"",invalidFamily:!1,oids:this.$store.getOids(),facility:void 0,facilityOptions:[],practiceSetting:void 0,practiceSettingOptions:[]}},beforeMount(){F.AVAILABLE_LANGUAGES.forEach((t=>this.availableLanguages.push(t))),this.reset(void 0,!1)},methods:{save(t){var i,l;t.preventDefault(),this.oids.local=this.orgOid;try{this.$store.setOids(this.oids);const t=this.$fhirUtils.createFhirOrganization(this.orgName,{system:this.orgOid},{given:this.orgContactGiven,family:this.orgContactFamily});this.$store.setSettings({language:this.language,organization:t,facilityType:(null===(i=this.facility)||void 0===i?void 0:i.defaultCoding)||this.$store.getSettings().facilityType,practiceSetting:(null===(l=this.practiceSetting)||void 0===l?void 0:l.defaultCoding)||this.$store.getSettings().practiceSetting})}catch(e){this.invalidOid=!0}},reset(t,i){t&&t.preventDefault();const l=i?this.$store.getDefaultSettings():this.$store.getSettings();this.language=l.language,this.orgName=l.organization.name||"",this.orgOid=k().evaluate(l.organization,"Organization.identifier.where(system.contains('urn:oid')).system")[0],this.orgContactGiven=k().evaluate(l.organization,"Organization.contact.first().name.given")[0],this.orgContactFamily=k().evaluate(l.organization,"Organization.contact.first().name.family")[0],this.facilityOptions=G.u0,this.practiceSettingOptions=G.LB,this.facility=G.u0.find((t=>t.defaultCoding.code===l.facilityType.code)),this.practiceSetting=G.LB.find((t=>t.defaultCoding.code===l.practiceSetting.code))}},watch:{orgOid(t){const i=/^([0-2])((\.0)|(\.[1-9][0-9]*))*$/,l=t.split("urn:oid:")[1];this.invalidOid=!(l&&i.test(l))},orgName(t){this.invalidName=0===t.length},orgContactGiven(t){this.invalidGiven=0===t.length},orgContactFamily(t){this.invalidFamily=0===t.length}}});var T=l(1639),W=l(4458),A=l(3190),L=l(6384),x=l(926),D=l(3119),Z=l(9379),q=l(9984),Q=l.n(q);const E=(0,T.Z)(N,[["render",V],["__scopeId","data-v-51471c08"]]),B=E;Q()(N,"components",{QCard:W.Z,QCardSection:A.Z,QSelect:L.Z,QSeparator:x.Z,QInput:D.Z,QBtn:Z.Z})}}]);