(globalThis["webpackChunkmhealth_proto"]=globalThis["webpackChunkmhealth_proto"]||[]).push([[887],{5887:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>Z});var l=i(9835),a=i(6970),n=i(1957);const o=t=>((0,l.dD)("data-v-76bde20c"),t=t(),(0,l.Cn)(),t),s={class:"row"},r={class:"col"},d={class:"col"},g={class:"row"},u={class:"col"},c={class:"col"},p={class:"row"},m={class:"col select-col"},v={class:"row"},h={class:"col select-col"},b={class:"button-container"},y={class:"oid-list"},f=o((()=>(0,l._)("br",null,null,-1))),_=o((()=>(0,l._)("br",null,null,-1))),z=o((()=>(0,l._)("br",null,null,-1))),$=o((()=>(0,l._)("br",null,null,-1)));function w(t,e,i,o,w,O){const C=(0,l.up)("q-card-section"),S=(0,l.up)("q-select"),V=(0,l.up)("q-separator"),U=(0,l.up)("q-input"),k=(0,l.up)("q-btn"),L=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(L,{class:"settings-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{class:"card-title"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(t.$t("layout.menu.settings")),1)])),_:1}),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("form",null,[(0,l._)("h3",null,(0,a.zw)(t.$t("common.language")),1),(0,l._)("p",null,(0,a.zw)(t.$t("settings.languageText")),1),(0,l.Wm)(S,{class:"lang-select",modelValue:t.language,"onUpdate:modelValue":e[0]||(e[0]=e=>t.language=e),options:t.availableLanguages,"option-label":e=>null==e?"-":t.$t("settings."+e),disable:t.availableLanguages.length<2,label:t.$t("common.language")},null,8,["modelValue","options","option-label","disable","label"]),(0,l.Wm)(V,{size:"0pt"}),(0,l._)("h3",null,(0,a.zw)(t.$t("settings.organizationTitle")),1),(0,l._)("p",null,(0,a.zw)(t.$t("settings.organizationText")),1),(0,l._)("div",s,[(0,l._)("div",r,[(0,l.Wm)(U,{modelValue:t.orgName,"onUpdate:modelValue":e[1]||(e[1]=e=>t.orgName=e),error:t.invalidName,type:"text",label:t.$t("settings.organizationName")},null,8,["modelValue","error","label"])]),(0,l._)("div",d,[(0,l.Wm)(U,{modelValue:t.orgOid,"onUpdate:modelValue":e[2]||(e[2]=e=>t.orgOid=e),error:t.invalidOid,type:"text",label:t.$t("settings.organizationOid")},null,8,["modelValue","error","label"])])]),(0,l._)("div",g,[(0,l._)("div",u,[(0,l.Wm)(U,{modelValue:t.orgContactGiven,"onUpdate:modelValue":e[3]||(e[3]=e=>t.orgContactGiven=e),error:t.invalidGiven,type:"text",label:t.$t("settings.organizationGiven")},null,8,["modelValue","error","label"])]),(0,l._)("div",c,[(0,l.Wm)(U,{modelValue:t.orgContactFamily,"onUpdate:modelValue":e[4]||(e[4]=e=>t.orgContactFamily=e),error:t.invalidFamily,type:"text",label:t.$t("settings.organizationFamily")},null,8,["modelValue","error","label"])])]),(0,l._)("p",null,(0,a.zw)(t.$t("settings.organizationTypeText")),1),(0,l._)("div",p,[(0,l._)("div",m,[(0,l.Wm)(S,{modelValue:t.facility,"onUpdate:modelValue":e[5]||(e[5]=e=>t.facility=e),options:t.facilityOptions,dense:"","option-label":t=>null==t?"?":t.languageDisplays.de,"option-value":t=>null==t?null:t.defaultCoding.code,label:t.$t("settings.organizationFacilityType")},null,8,["modelValue","options","option-label","option-value","label"])])]),(0,l._)("div",v,[(0,l._)("div",h,[(0,l.Wm)(S,{modelValue:t.practiceSetting,"onUpdate:modelValue":e[6]||(e[6]=e=>t.practiceSetting=e),options:t.practiceSettingOptions,dense:"","option-label":t=>null==t?"?":t.languageDisplays.de,"option-value":t=>null==t?null:t.defaultCoding.code,label:t.$t("settings.organizationPracticeSetting")},null,8,["modelValue","options","option-label","option-value","label"])])]),(0,l._)("div",b,[(0,l.Wm)(k,{id:"reset-button",onClick:e[7]||(e[7]=(0,n.iM)((e=>t.reset(e,!0)),["stop"])),type:"submit",label:t.$t("common.loadDefault")},null,8,["label"]),(0,l.Wm)(k,{id:"save-button",onClick:(0,n.iM)(t.save,["stop"]),type:"submit",disable:t.invalidOid||t.invalidName||t.invalidGiven||t.invalidFamily,label:t.$t("common.save")},null,8,["onClick","disable","label"])]),(0,l.Wm)(V,{size:"0pt"}),(0,l._)("h3",null,(0,a.zw)(t.$t("settings.oidsTitle")),1),(0,l._)("p",null,(0,a.zw)(t.$t("settings.oidsText")),1),(0,l._)("ul",y,[(0,l._)("li",null,[(0,l._)("b",null,(0,a.zw)(t.$t("settings.oidsMpi"))+":",1),(0,l.Uk)(),f,(0,l.Uk)(" "+(0,a.zw)(t.oids.mpiId),1)]),(0,l._)("li",null,[(0,l._)("b",null,(0,a.zw)(t.$t("settings.oidsSpid"))+":",1),(0,l.Uk)(),_,(0,l.Uk)(" "+(0,a.zw)(t.oids.eprSpid),1)]),(0,l._)("li",null,[(0,l._)("b",null,(0,a.zw)(t.$t("settings.oidsAhv"))+":",1),(0,l.Uk)(),z,(0,l.Uk)(" "+(0,a.zw)(t.oids.ahv),1)]),(0,l._)("li",null,[(0,l._)("b",null,(0,a.zw)(t.$t("settings.oidsApp"))+":",1),(0,l.Uk)(),$,(0,l.Uk)(" "+(0,a.zw)(t.oids.app),1)])])])])),_:1})])),_:1})}var O=i(1834),C=i.n(O),S=i(3742),V=i(7861);const U=(0,l.aZ)({name:"SettingsPage",data(){return{language:V.APP_LANGUAGES.DE,availableLanguages:new Array,orgName:"",invalidName:!1,orgOid:"",invalidOid:!1,orgContactGiven:"",invalidGiven:!1,orgContactFamily:"",invalidFamily:!1,oids:this.$store.getOids(),facility:void 0,facilityOptions:[],practiceSetting:void 0,practiceSettingOptions:[]}},beforeMount(){V.AVAILABLE_LANGUAGES.forEach((t=>this.availableLanguages.push(t))),this.reset(void 0,!1)},methods:{save(t){var e,i;t.preventDefault(),this.oids.local=this.orgOid;try{this.$store.setOids(this.oids);const t=this.$fhirUtils.createFhirOrganization(this.orgName,{system:this.orgOid},{given:this.orgContactGiven,family:this.orgContactFamily});this.$store.setSettings({language:this.language,organization:t,facilityType:(null===(e=this.facility)||void 0===e?void 0:e.defaultCoding)||this.$store.getSettings().facilityType,practiceSetting:(null===(i=this.practiceSetting)||void 0===i?void 0:i.defaultCoding)||this.$store.getSettings().practiceSetting})}catch(l){this.invalidOid=!0}},reset(t,e){t&&t.preventDefault();const i=e?this.$store.getDefaultSettings():this.$store.getSettings();this.language=i.language,this.orgName=i.organization.name||"",this.orgOid=C().evaluate(i.organization,"Organization.identifier.where(system.contains('urn:oid')).system")[0],this.orgContactGiven=C().evaluate(i.organization,"Organization.contact.first().name.given")[0],this.orgContactFamily=C().evaluate(i.organization,"Organization.contact.first().name.family")[0],this.facilityOptions=S.u0,this.practiceSettingOptions=S.LB,this.facility=S.u0.find((t=>t.defaultCoding.code===i.facilityType.code)),this.practiceSetting=S.LB.find((t=>t.defaultCoding.code===i.practiceSetting.code))}},watch:{orgOid(t){const e=/^([0-2])((\.0)|(\.[1-9][0-9]*))*$/,i=t.split("urn:oid:")[1];this.invalidOid=!(i&&e.test(i))},orgName(t){this.invalidName=0===t.length},orgContactGiven(t){this.invalidGiven=0===t.length},orgContactFamily(t){this.invalidFamily=0===t.length},language(t){this.$store.setLanguage(t),this.$i18n.locale=this.$store.getLanguage(),i(7404)("./"+(0,V.getLangStringFromLocale)(this.$store.getLanguage())).then((t=>{this.$q.lang.set(t.default)})).catch((t=>console.error(t)))}}});var k=i(1639),L=i(4458),F=i(3190),G=i(6384),N=i(926),T=i(3119),W=i(4455),A=i(9984),D=i.n(A);const x=(0,k.Z)(U,[["render",w],["__scopeId","data-v-76bde20c"]]),Z=x;D()(U,"components",{QCard:L.Z,QCardSection:F.Z,QSelect:G.Z,QSeparator:N.Z,QInput:T.Z,QBtn:W.Z})},7404:(t,e,i)=>{var l={"./de":[4960,9],"./de.js":[3239,7,736],"./fr":[6443,9,736],"./fr.js":[5010,7,736]};function a(t){if(!i.o(l,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=l[t],a=e[0];return Promise.all(e.slice(2).map(i.e)).then((()=>i.t(a,16|e[1])))}a.keys=()=>Object.keys(l),a.id=7404,t.exports=a}}]);